"""This module defines custom data types and Pydantic models for the runtime.

It ensures data consistency and validation across different modules by providing
centralized, well-defined data structures for plans, tasks, and agent outputs.
"""

from typing import List, Optional
from pydantic import BaseModel, Field



class Role(BaseModel):
    """Defines a role within the team, including its title and description."""
    title: str = Field(..., description="The official title of the role.")
    description: str = Field(..., description="A clear and concise description of the role's responsibilities.")

class Task(BaseModel):
    """Represents a single, actionable task in a plan."""
    task_id: str = Field(..., description="A unique identifier for the task.")
    task: str = Field(..., description="A detailed description of the task to be performed.")
    role: str = Field(..., description="The title of the role responsible for this task.")
    name: str = Field(..., description="The name of the team member assigned to this task.")
    requires: List[str] = Field(
        ...,
        description="A list of task IDs that must be completed before this task can start."
    )

class Plan(BaseModel):
    """Outlines the overall strategy, including roles, tasks, and reasoning."""
    reasoning: str = Field(..., description="The rationale behind the plan's structure and task sequence.")
    roles: List[Role] = Field(..., description="A list of roles involved in executing the plan.")
    tasks: List[Task] = Field(..., description="An ordered list of tasks to be performed.")

class Artifact(BaseModel):
    """Represents a file or data artifact generated during task execution."""
    name: str = Field(..., description="The name of the artifact (e.g., file path).")
    content: str = Field(..., description="The content of the artifact.")

class Prompt(BaseModel):
    """Represents a prompt to be sent to an agent."""
    name: str = Field(..., description="The name of the agent the prompt is intended for.")
    role: str = Field(..., description="The role of the agent this prompt is for.")
    content: str = Field(..., description="The full content of the prompt.")

class AgentOutput(BaseModel):
    """Represents the structured output expected from an agent's execution."""
    reasoning: str = Field(..., description="The thinking process or reasoning behind the agent's task.")
    output: str = Field(..., description="The primary output or result of the agent's task.")
    prompts: List[Prompt] = Field(
        ...,
        description="A list of prompts generated by the agent for sub-tasks or follow-up actions."
    )
    files: List[Artifact] = Field(..., description="A list of files or artifacts generated by the agent.")

    # Optional fields for more detailed structured output:
    # thoughts: Optional[str] = Field(None, description="The agent's inner monologue or detailed thoughts during execution.")
    # next_steps: Optional[List[str]] = Field(None, description="A list of suggested next steps based on the output.")

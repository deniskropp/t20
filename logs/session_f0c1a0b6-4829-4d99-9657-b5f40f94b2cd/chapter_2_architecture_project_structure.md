# Chapter 2: Core Concepts and Architecture

## 2.1 The Orchestrator-Delegate Model

The T20 system operates on a sophisticated **Orchestrator-Delegate model**. This architecture is central to its dynamic planning and execution capabilities. The **Orchestrator** agent, primarily `Meta-AI`, serves as the brain of the operation. Its core responsibilities include:

*   **Goal Analysis:** Interpreting the high-level user goal.
*   **Plan Generation:** Dynamically creating a step-by-step plan, often in JSON format, outlining the tasks required to achieve the goal.
*   **Task Delegation:** Assigning specific sub-tasks to the most appropriate specialized agents (delegates) based on their defined roles and capabilities.
*   **Context Management:** Ensuring that the output and context from one step are correctly passed to the next.

The **Delegate Agents** are specialized entities, each designed to perform a specific set of tasks. Examples include `Aurora` for design, `Kodax` for engineering, and `TASe` for step extraction. They receive tasks from the Orchestrator, execute them, and return their outputs (artifacts) back to the Orchestrator or the next agent in the sequence.

## 2.2 Agent Definition and Capabilities

Agents within the T20 system are defined in a clear and accessible manner using **YAML files**. These configuration files specify crucial aspects of each agent, enabling the Orchestrator to understand and utilize them effectively. Key elements defined in an agent's YAML configuration include:

*   **`name`**: A unique identifier for the agent (e.g., `Meta-AI`, `Aurora`).
*   **`role`**: The primary function or expertise of the agent (e.g., `Orchestrator`, `Designer`).
*   **`goal`**: A brief description of the agent's overarching objective within the system.
*   **`model`**: The specific Large Language Model (LLM) powering the agent (e.g., `gemini-2.5-pro`, `gemini-2.5-flash-lite`). This dictates the agent's underlying capabilities and performance characteristics.

These declarative definitions allow the T20 system to be highly configurable and extensible, making it straightforward to add new agents with different specializations or to swap out underlying models.

## 2.3 Dynamic Planning Mechanism

A cornerstone of the T20 system is its **Dynamic Planning Mechanism**. Unlike rigid, pre-programmed workflows, T20 generates plans on-the-fly for each unique goal. This process typically involves:

1.  **Orchestrator Interpretation:** The `Meta-AI` agent analyzes the user's high-level goal.
2.  **LLM-Powered Planning:** The Orchestrator queries a powerful LLM (like `gemini-2.5-pro`) to break down the goal into a sequence of actionable steps.
3.  **Structured Plan Output:** The generated plan is structured, often in JSON format, detailing the sequence of tasks, the agents responsible for each task, and any dependencies.
*   **Schema Enforcement:** The system utilizes **Pydantic** for schema enforcement, ensuring that the plans generated by the LLM are reliable, machine-readable, and adhere to a predefined structure. This prevents errors and ensures smooth execution.

This dynamic approach allows T20 to adapt to a wide variety of tasks without requiring manual workflow configuration for each new objective.

## 2.4 Contextual Collaboration and Artifact Passing

Effective collaboration between agents is facilitated through **Contextual Collaboration** and **Artifact Passing**. As the Orchestrator executes the plan, the output of each agent's task is treated as an **artifact**. These artifacts represent the tangible results of an agent's work (e.g., generated code, design descriptions, extracted information).

*   **Stateful Sessions:** Each run of the T20 system is contained within a dedicated **session directory**. This directory stores all artifacts, prompts, and logs generated during that specific execution.
*   **Context Chaining:** Artifacts produced by one agent are made available as inputs for subsequent agents. This creates a chain of context, allowing agents to build upon each other's work seamlessly. For example, design specifications generated by `Aurora` can be passed to `Kodax` for implementation.

This mechanism ensures that information flows correctly through the system, maintaining a coherent state and enabling complex, multi-step task completion.

## 2.5 Meta-Learning and Prompt Engineering (`Lyra`)

The T20 system includes a unique agent, `Lyra`, the **Prompt Engineer**. `Lyra`'s role is to enhance the performance and effectiveness of other agents by refining their system prompts *during* the workflow execution. This **Meta-Learning** capability allows the system to:

*   **Adapt Prompts:** Adjust prompts based on the specific task, intermediate results, or desired output quality.
*   **Optimize Performance:** Improve the accuracy, creativity, or efficiency of agent responses.
*   **Ensure Consistency:** Maintain a consistent tone and adherence to instructions across different agents and tasks.

By dynamically optimizing prompts, `Lyra` contributes significantly to the overall robustness and adaptability of the T20 system.

## 2.6 Session Logging and Traceability

**Session Logging** is a fundamental feature of the T20 system, providing unparalleled **Traceability**. Every aspect of an execution run is meticulously recorded within the session directory:

*   **Initial Goal:** The original user input.
*   **Initial Plan:** The AI-generated plan (`initial_plan.json`).
*   **Agent Prompts:** The exact prompts sent to each agent.
*   **Agent Outputs:** The artifacts (results) generated by each agent.
*   **Execution Logs:** Detailed logs of agent actions and system operations.

The structure of these session directories (e.g., `sessions/session_<uuid>/`) makes it easy to locate and review specific runs. This detailed logging is crucial for:

*   **Debugging:** Identifying the root cause of errors or unexpected behavior.
*   **Auditing:** Understanding the complete decision-making process.
*   **Learning:** Analyzing how the system tackled specific problems to improve future interactions.

This commitment to transparency and traceability ensures that users can fully understand and trust the T20 system's operations.
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 2: Architecture - T20 Multi-Agent System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Mastering the T20 Multi-Agent System</h1>
        <nav>
            <ul>
                <li><a href="chapter_1_introduction.html">Chapter 1: Introduction</a></li>
                <li><a href="chapter_2_architecture.html">Chapter 2: Architecture</a></li>
                <li><a href="chapter_3_getting_started.html">Chapter 3: Getting Started</a></li>
                <li><a href="chapter_4_usage.html">Chapter 4: Usage & Examples</a></li>
                <li><a href="chapter_5_agents.html">Chapter 5: The T20 Team</a></li>
                <li><a href="chapter_6_project_structure.html">Chapter 6: Project Structure</a></li>
                <li><a href="chapter_7_conclusion.html">Chapter 7: Conclusion</a></li>
                <li><a href="appendix_a_glossary.html">Appendix A: Glossary</a></li>
                <li><a href="appendix_b_errors.html">Appendix B: Errors</a></li>
                <li><a href="appendix_c_session_log.html">Appendix C: Session Log</a></li>
                <li><a href="appendix_d_references.html">Appendix D: References</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <h2>Chapter 2: Core Concepts and Architecture</h2>

        <h3>2.1 The Orchestrator-Delegate Model</h3>

        <p>The T20 system operates on a sophisticated <strong>Orchestrator-Delegate model</strong>. This architecture is central to its dynamic planning and execution capabilities. The <strong>Orchestrator</strong> agent, primarily <code>Meta-AI</code>, serves as the brain of the operation. Its core responsibilities include:</p>
        <ul>
            <li><strong>Goal Analysis:</strong> Interpreting the high-level user goal.</li>
            <li><strong>Plan Generation:</strong> Dynamically creating a step-by-step plan, often in JSON format, outlining the tasks required to achieve the goal.</li>
            <li><strong>Task Delegation:</strong> Assigning specific sub-tasks to the most appropriate specialized agents (delegates) based on their defined roles and capabilities.</li>
            <li><strong>Context Management:</strong> Ensuring that the output and context from one step are correctly passed to the next.</li>
        </ul>
        <p>The <strong>Delegate Agents</strong> are specialized entities, each designed to perform a specific set of tasks. Examples include <code>Aurora</code> for design, <code>Kodax</code> for engineering, and <code>TASe</code> for step extraction. They receive tasks from the Orchestrator, execute them, and return their outputs (artifacts) back to the Orchestrator or the next agent in the sequence.</p>

        <h3>2.2 Dynamic Planning Mechanism</h3>

        <p>A cornerstone of the T20 system is its <strong>Dynamic Planning Mechanism</strong>. Unlike rigid, pre-programmed workflows, T20 generates plans on-the-fly for each unique goal. This process typically involves:</p>
        <ol>
            <li><strong>Orchestrator Interpretation:</strong> The <code>Meta-AI</code> agent analyzes the user's high-level goal.</li>
            <li><strong>LLM-Powered Planning:</strong> The Orchestrator queries a powerful LLM (like Gemini 2.5 Pro) to break down the goal into a sequence of actionable steps.</li>
            <li><strong>Structured Plan Output:</strong> The generated plan is structured, often in JSON format, detailing the sequence of tasks, the agents responsible for each task, and any dependencies.</li>
            <li><strong>Schema Enforcement:</strong> The system utilizes <strong>Pydantic</strong> for schema enforcement, ensuring that the plans generated by the LLM are reliable, machine-readable, and adhere to a predefined structure. This prevents errors and ensures smooth execution.</li>
        </ol>
        <p>This dynamic approach allows T20 to adapt to a wide variety of tasks without requiring manual workflow configuration for each new objective.</p>

        <h3>2.3 Contextual Collaboration and Artifact Passing</h3>

        <p>Effective collaboration between agents is facilitated through <strong>Contextual Collaboration</strong> and <strong>Artifact Passing</strong>. As the Orchestrator executes the plan, the output of each agent's task is treated as an <strong>artifact</strong>. These artifacts represent the tangible results of an agent's work (e.g., generated code, design descriptions, extracted information).</p>
        <ul>
            <li><strong>Stateful Sessions:</strong> Each run of the T20 system is contained within a dedicated <strong>session directory</strong>. This directory stores all artifacts, prompts, and logs generated during that specific execution.</li>
            <li><strong>Context Chaining:</strong> Artifacts produced by one agent are made available as inputs for subsequent agents. This creates a chain of context, allowing agents to build upon each other's work seamlessly. For example, design specifications generated by <code>Aurora</code> can be passed to <code>Kodax</code> for implementation.</li>
        </ul>
        <p>This mechanism ensures that information flows correctly through the system, maintaining a coherent state and enabling complex, multi-step task completion.</p>

        <h3>2.4 Meta-Learning and Prompt Engineering (Lyra)</h3>

        <p>The T20 system includes a unique agent, <code>Lyra</code>, the <strong>Prompt Engineer</strong>. <code>Lyra</code>'s role is to enhance the performance and effectiveness of other agents by refining their system prompts *during* the workflow execution. This <strong>Meta-Learning</strong> capability allows the system to:</p>
        <ul>
            <li><strong>Adapt Prompts:</strong> Adjust prompts based on the specific task, intermediate results, or desired output quality.</li>
            <li><strong>Optimize Performance:</strong> Improve the accuracy, creativity, or efficiency of agent responses.</li>
            <li><strong>Ensure Consistency:</strong> Maintain a consistent tone and adherence to instructions across different agents and tasks.</li>
        </ul>
        <p>By dynamically optimizing prompts, <code>Lyra</code> contributes significantly to the overall robustness and adaptability of the T20 system.</p>

        <h3>2.5 Session Logging and Traceability</h3>

        <p><strong>Session Logging</strong> is a fundamental feature of the T20 system, providing unparalleled <strong>Traceability</strong>. Every aspect of an execution run is meticulously recorded within the session directory:</p>
        <ul>
            <li><strong>Initial Goal:</strong> The original user input.</li>
            <li><strong>Initial Plan:</strong> The AI-generated plan (<code>initial_plan.json</code>).</li>
            <li><strong>Agent Prompts:</strong> The exact prompts sent to each agent.</li>
            <li><strong>Agent Outputs:</strong> The artifacts (results) generated by each agent.</li>
            <li><strong>Execution Logs:</strong> Detailed logs of agent actions and system operations.</li>
        </ul>
        <p>The structure of these session directories (e.g., <code>sessions/session_&lt;uuid&gt;/</code>) makes it easy to locate and review specific runs. This detailed logging is crucial for:</p>
        <ul>
            <li><strong>Debugging:</strong> Identifying the root cause of errors or unexpected behavior.</li>
            <li><strong>Auditing:</strong> Understanding the complete decision-making process.</li>
            <li><strong>Learning:</strong> Analyzing how the system tackled specific problems to improve future interactions.</li>
        </ul>
        <p>This commitment to transparency and traceability ensures that users can fully understand and trust the T20 system's operations.</p>

        <h3>Key Features Summary:</h3>
        <ul>
            <li><strong>Declarative Agent Definition:</strong> Agents configured via simple YAML files.</li>
            <li><strong>Dynamic, AI-Generated Plans:</strong> Custom plans created for each goal.</li>
            <li><strong>Role-Based Delegation:</strong> Tasks assigned to the most suitable agents.</li>
            <li><strong>Structured LLM Outputs:</strong> Pydantic used for reliable, machine-readable plans.</li>
            <li><strong>Stateful Sessions:</strong> Isolated directories for each run's artifacts and logs.</li>
            <li><strong>CLI-Driven:</strong> Easy operation via Command-Line Interface.</li>
            <li><strong>Powered by Google Gemini:</strong> Leverages Gemini models for orchestration and specialized tasks.</li>
        </ul>
    </main>
    <footer>
        <p>&copy; 2023 Your Name/Organization. All rights reserved.</p>
    </footer>
</body>
</html>